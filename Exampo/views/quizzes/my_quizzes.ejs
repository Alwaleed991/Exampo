<% layout("layouts/boilerplate") %>

<script src="/docs/5.3/assets/js/color-modes.js"></script>

<link rel="stylesheet" href="/stylesheets/signuser.css">

<div class="recent-quizzes-title">
    <h2 style="color: rgb(2, 2, 92);"> <br>&nbsp;&nbsp;My Quizzes</h2>
    <hr style="border: 1px solid #333333;">
</div>

<div class="container">
    <div class="row">
        <!-- Loop through quizzes dynamically -->
        <% quizzes.forEach(function(quiz, index) { %>

            <div class="col-md-3 mb-4">
                <div class="ag-courses_item card" style="transition: background-color 0.3s ease;">
                    <a href="/quizzes/<%= quiz._id %>" class="ag-courses-item_link">
                        <div class="ag-courses-item_bg" style="background-color: <%= quiz.hoverColor || '#0f0f0f' %>;"></div>
                        <div class="ag-courses-item_title">
                            <%= quiz.title %>
                        </div>
                        <div class="ag-courses-item_user-box">
                            <svg xmlns="http://www.w3.org/2000/svg" style="position: relative; top: -2px;" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
                                <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
                            </svg>
                            <span class="ag-courses-item_username">
                                <%= quiz.owner.username %>
                            </span>
                        </div>
                        <div class="ag-courses-item_rating">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                            </svg>
                            <div class="ag-courses-item_rating_value">
                                <%= quiz.averageRating ? quiz.averageRating.toFixed(1) : "No rating yet" %>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
            <% if ((index + 1) % 4 === 0) { %>  <!-- Close row after 4 quizzes -->
                </div><div class="row">
            <% } %>
        <% }) %>
    </div>

    <!-- Pagination -->
    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
            <% if (currentPage > 1) { %>
                <li class="page-item">
                    <a class="page-link" href="?page=<%= currentPage - 1 %>" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
            <% } %>

            <% for (let i = 1; i <= totalPages; i++) { %>
                <li class="page-item <%= (i === currentPage) ? 'active' : '' %>">
                    <a class="page-link" href="?page=<%= i %>"><%= i %></a>
                </li>
            <% } %>

            <% if (currentPage < totalPages) { %>
                <li class="page-item">
                    <a class="page-link" href="?page=<%= currentPage + 1 %>" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            <% } %>
        </ul>
    </nav>
</div>
